# ë„¤ì´ë²„ ë¶€ë™ì‚° ë§¤ë¬¼ ìˆ˜ì§‘ ë° ë¶„ì„ê¸° - ì‚¬ìš© ê°€ì´ë“œ

## í”„ë¡œì íŠ¸ ê°œìš”
ì´ ë„êµ¬ëŠ” ë„¤ì´ë²„ ë¶€ë™ì‚°(Naver Land)ì˜ ë§¤ë¬¼ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ì—¬ í—ˆìœ„ë§¤ë¬¼ ì˜ì‹¬ ì‚¬ë¡€ì¸ 'ë¯¸ë¼ë§¤ë¬¼' ì¦ê±°ë¥¼ í™•ë³´í•˜ê¸° ìœ„í•œ ë„êµ¬ì…ë‹ˆë‹¤. Streamlit ëŒ€ì‹œë³´ë“œë¥¼ í†µí•´ ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°
`naver_land_collector/` í´ë” ë‚´ ì£¼ìš” íŒŒì¼ ì„¤ëª…:
- `requirements.txt`: Python ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± íŒŒì¼.
- `utils.py`: ë°ì´í„° ì •ì œ ë° JSON íŒŒì¼ ì…ì¶œë ¥ì„ ë‹´ë‹¹í•˜ëŠ” ìœ í‹¸ë¦¬í‹°.
- `crawler.py`: ë„¤ì´ë²„ ë¶€ë™ì‚° ëª¨ë°”ì¼ API ì—°ë™ í•µì‹¬ ë¡œì§.
- `app.py`: Streamlit ê¸°ë°˜ ì›¹ ëŒ€ì‹œë³´ë“œ UI.
- `data.json`: (ìë™ ìƒì„±ë¨) ìˆ˜ì§‘ëœ ë§¤ë¬¼ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” íŒŒì¼.

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤:
```bash
pip install -r requirements.txt
```

### 2. ì•± ì‹¤í–‰ ë°©ë²• (ì´ì›í™”)

#### A. ìˆ˜ì§‘ ì„œë²„ (Server Mode) - ë¡œì»¬ ì‹¤í–‰
ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ê´€ë¦¬í•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤. PCë‚˜ ì„œë²„ì—ì„œ ì‹¤í–‰í•´ë‘ì„¸ìš”.
```bash
streamlit run svrapp.py
```
*   **ê¸°ëŠ¥**: ìˆ˜ì§‘ ì„¤ì •, ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥, ìë™ ìˆ˜ì§‘(ìŠ¤ì¼€ì¤„ë§), ë°ì´í„° ì‚­ì œ.
*   **ì£¼ì˜**: ì´ ì•±ì´ êº¼ì§€ë©´ ìë™ ìˆ˜ì§‘ë„ ë©ˆì¶¥ë‹ˆë‹¤.

#### B. ì¡°íšŒ ì„œë¹„ìŠ¤ (Service Mode) - í´ë¼ìš°ë“œ ë°°í¬
ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ì—¬ ë³´ëŠ” ìš©ë„ì…ë‹ˆë‹¤. Streamlit Cloud ë“±ì— ë°°í¬í•˜ì—¬ ì–¸ì œë“  ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
streamlit run app.py
```
*   **ê¸°ëŠ¥**: ëŒ€ì‹œë³´ë“œ í†µê³„, ë§¤ë¬¼ ìƒì„¸ ë¶„ì„ (ìˆ˜ì§‘/ê´€ë¦¬ ê¸°ëŠ¥ ì—†ìŒ).
*   **íŠ¹ì§•**: 5ë¶„ë§ˆë‹¤ ìë™ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨ë˜ì–´ ì„œë²„ê°€ ìˆ˜ì§‘í•œ ìµœì‹  ë°ì´í„°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

### 3. ì‚¬ìš© ê°€ì´ë“œ
1. **ê¸°ë³¸ ì„¤ì • (ì‚¬ì´ë“œë°”)**:
    - **ë‹¨ì§€ ì‹ë³„ ë²ˆí˜¸ (hscpNo)** ì…ë ¥: ë„¤ì´ë²„ ë¶€ë™ì‚°ì—ì„œ íŠ¹ì • ì•„íŒŒíŠ¸ ë‹¨ì§€ë¥¼ ì¡°íšŒí•  ë•Œ URLì— í¬í•¨ëœ ë²ˆí˜¸ì…ë‹ˆë‹¤.
    - ì˜ˆì‹œ: *ì€ë§ˆì•„íŒŒíŠ¸*ì˜ ê²½ìš° `1116`. (ê¸°ë³¸ê°’ `108064`ë¡œ ì„¤ì •ë¨)
    - **ë§¤ë¬¼ ì¢…ë¥˜** ì„ íƒ (ë§¤ë§¤/ì „ì„¸/ì›”ì„¸).
2. **ì¦ê±° ìˆ˜ì§‘**:
    - **"ë§¤ë¬¼ ìˆ˜ì§‘ ì‹œì‘"** ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.
    - ì‹œìŠ¤í…œì´ í˜„ì¬ ë“±ë¡ëœ ë§¤ë¬¼ ì •ë³´ë¥¼ ê°€ì ¸ì™€ `data.json` íŒŒì¼ì— ì‹œê°„ ê¸°ë¡ê³¼ í•¨ê»˜ ì €ì¥í•©ë‹ˆë‹¤.
3. **ë°ì´í„° ë¶„ì„**:
    - ëŒ€ì‹œë³´ë“œ ì¤‘ì•™ì˜ ì°¨íŠ¸ë¥¼ í†µí•´ ê°€ê²© ë¶„í¬ì™€ í†µê³„ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
    - ì—¬ëŸ¬ ë‚ ì— ê±¸ì³ ìˆ˜ì§‘í•˜ë©´ ì‹œê³„ì—´ ë³€í™”ë¥¼ ì¶”ì í•˜ì—¬ ë§¤ë¬¼ì´ ì‚¬ë¼ì§€ê±°ë‚˜ ê°€ê²©ì´ ë³€ë™ëœ ë‚´ì—­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **ë°ì´í„° ë‚´ë³´ë‚´ê¸°**:
    - **"ë°ì´í„° ë‹¤ìš´ë¡œë“œ (CSV)"** ë²„íŠ¼ì„ ëˆŒëŸ¬ ì—‘ì…€ ë“±ìœ¼ë¡œ ì—´ì–´ë³¼ ìˆ˜ ìˆëŠ” íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

## â“ ë‹¨ì§€ ì‹ë³„ ë²ˆí˜¸ (hscpNo) ì°¾ëŠ” ë²•
ë„¤ì´ë²„ ë¶€ë™ì‚°ì—ì„œ ì›í•˜ëŠ” ì•„íŒŒíŠ¸ ë‹¨ì§€ë¥¼ ì°¾ì€ í›„, URLì—ì„œ ë²ˆí˜¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë°©ë²• 1: ëª¨ë°”ì¼ ì›¹ (m.land.naver.com)**
1. ë„¤ì´ë²„ ë¶€ë™ì‚° ëª¨ë°”ì¼ í˜ì´ì§€ ì ‘ì†.
2. ì›í•˜ëŠ” ì•„íŒŒíŠ¸ ë‹¨ì§€ ê²€ìƒ‰ ë° ì„ íƒ.
3. ì£¼ì†Œì°½ì˜ URLì„ í™•ì¸í•©ë‹ˆë‹¤.
   - ì˜ˆ: `https://m.land.naver.com/complex/1116?tradeType=A1`
   - ì—¬ê¸°ì„œ `complex/` ë’¤ì— ìˆëŠ” ìˆ«ì **1116**ì´ ë‹¨ì§€ ë²ˆí˜¸ì…ë‹ˆë‹¤.

**ë°©ë²• 2: PC ì›¹ (land.naver.com)**
1. ë„¤ì´ë²„ ë¶€ë™ì‚° PC í˜ì´ì§€ ì ‘ì†.
2. ì•„íŒŒíŠ¸ ë‹¨ì§€ ì„ íƒ í›„ 'ë‹¨ì§€ì •ë³´' í´ë¦­.
3. URLì´ `https://new.land.naver.com/complexes/1116?ms=...` í˜•íƒœì…ë‹ˆë‹¤.
   - `complexes/` ë°”ë¡œ ë’¤ì˜ ìˆ«ì **1116**ì´ ë‹¨ì§€ ë²ˆí˜¸ì…ë‹ˆë‹¤.

## â˜ï¸ Google Sheets ì—°ë™ (í´ë¼ìš°ë“œ ë°°í¬ìš©)
Streamlit Cloud ë“±ì— ë°°í¬ ì‹œ ë°ì´í„° ìœ ì§€ë¥¼ ìœ„í•´ **êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸**ë¥¼ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.

**ì„¤ì • ë°©ë²•:**
1. `.streamlit/secrets.toml` íŒŒì¼ ìƒì„± (ë¡œì»¬ ì‹¤í–‰ ì‹œ)
2. **Streamlit Cloud ë°°í¬ ì‹œ**: GitHubì— ì´ íŒŒì¼ì„ ì˜¬ë¦¬ì§€ ë§ˆì„¸ìš”. ëŒ€ì‹  Streamlit ëŒ€ì‹œë³´ë“œì—ì„œ ì„¤ì •í•©ë‹ˆë‹¤.

### ğŸŒ Streamlit Cloud ë°°í¬ ì‹œ Secrets ì„¤ì • ë°©ë²•
1. Streamlit Cloudì— ì•±ì„ ë°°í¬í•œ í›„, ëŒ€ì‹œë³´ë“œ(App Dashboard)ë¡œ ì´ë™í•©ë‹ˆë‹¤.
2. ì•±ì˜ **Settings** (ì  3ê°œ ë©”ë‰´) -> **Secrets** ë©”ë‰´ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.
3. í…ìŠ¤íŠ¸ ë°•ìŠ¤ì— `secrets.toml` íŒŒì¼ì˜ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤ (TOML í˜•ì‹).
   ```toml
   [connections.gsheets]
   ...
   ```
4. **Save**ë¥¼ ëˆ„ë¥´ë©´ ì•±ì´ ìë™ìœ¼ë¡œ ì¬ì‹œì‘ë˜ë©´ì„œ ì—°ë™ë©ë‹ˆë‹¤.

### ğŸ”‘ êµ¬ê¸€ ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ë°œê¸‰ ë° ì„¤ì • ê°€ì´ë“œ
1. **Google Cloud Console ì ‘ì†**: [https://console.cloud.google.com/](https://console.cloud.google.com/) ì— ì ‘ì†í•˜ì—¬ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
2. **API ì‚¬ìš© ì„¤ì •**:
   - ìƒë‹¨ ê²€ìƒ‰ì°½ì— **"Google Sheets API"** ê²€ìƒ‰ -> **ì‚¬ìš©(Enable)** í´ë¦­.
   - ìƒë‹¨ ê²€ìƒ‰ì°½ì— **"Google Drive API"** ê²€ìƒ‰ -> **ì‚¬ìš©(Enable)** í´ë¦­.
3. **ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±**:
   - ë©”ë‰´ -> **IAM ë° ê´€ë¦¬** -> **ì„œë¹„ìŠ¤ ê³„ì •** -> **+ ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸°**.
   - ì´ë¦„ ì…ë ¥ í›„ **ì™„ë£Œ**.
4. **í‚¤(JSON) ë‹¤ìš´ë¡œë“œ**:
   - ìƒì„±ëœ ì„œë¹„ìŠ¤ ê³„ì • í´ë¦­ -> **í‚¤** íƒ­ -> **í‚¤ ì¶”ê°€** -> **ìƒˆ í‚¤ ë§Œë“¤ê¸°** -> **JSON** ì„ íƒ -> **ë§Œë“¤ê¸°**.
   - ì»´í“¨í„°ì— JSON íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.
5. **êµ¬ê¸€ ì‹œíŠ¸ ê³µìœ **:
   - ë°ì´í„°ë¥¼ ì €ì¥í•  **êµ¬ê¸€ ìŠ¤í”„ë ˆë“œì‹œíŠ¸**ë¥¼ ìƒˆë¡œ ë§Œë“­ë‹ˆë‹¤.
   - ìš°ì¸¡ ìƒë‹¨ **"ê³µìœ "** ë²„íŠ¼ í´ë¦­ -> ë°©ê¸ˆ ë‹¤ìš´ë¡œë“œí•œ JSON íŒŒì¼ ì•ˆì— ìˆëŠ” `client_email` ì£¼ì†Œ(ì˜ˆ: `...iam.gserviceaccount.com`)ë¥¼ ì…ë ¥í•˜ê³  **í¸ì§‘ì ê¶Œí•œ**ìœ¼ë¡œ ê³µìœ í•©ë‹ˆë‹¤.
6. **Secrets ì…ë ¥**:
   - ë‹¤ìš´ë¡œë“œí•œ JSON íŒŒì¼ì„ ë©”ëª¨ì¥ìœ¼ë¡œ ì—½ë‹ˆë‹¤.
   - ê·¸ ì•ˆì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ `.streamlit/secrets.toml` íŒŒì¼ì˜ í•´ë‹¹ í•­ëª©ì— ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤ (ë”°ì˜´í‘œ ì•ˆì— ê°’ë§Œ).

```toml
[connections.gsheets]
spreadsheet = "https://docs.google.com/spreadsheets/d/14QzR2C5p89rHfnX9RGhl-o5bOdLdndBwExAQeX8hr5A/edit?usp=sharing"
worksheet = "data"
type = "service_account"
project_id = "..."
private_key_id = "..."
private_key = "..."
client_email = "..."
client_id = "..."
auth_uri = "..."
token_uri = "..."
auth_provider_x509_cert_url = "..."
client_x509_cert_url = "..."
```
*ì„¤ì •ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ë¡œì»¬ JSON íŒŒì¼ëª¨ë“œë¡œ ì‘ë™í•©ë‹ˆë‹¤.*

## âš ï¸ ì°¸ê³  ì‚¬í•­
- ì´ í¬ë¡¤ëŸ¬ëŠ” ë„¤ì´ë²„ ë¶€ë™ì‚° ëª¨ë°”ì¼ ì›¹ API ë¡œì§ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë„¤ì´ë²„ ì¸¡ì˜ ì—…ë°ì´íŠ¸ë¡œ êµ¬ì¡°ê°€ ë³€ê²½ë˜ë©´ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë³¸ ë„êµ¬ëŠ” ê°œì¸ì ì¸ ë§¤ë¬¼ ë¶„ì„ ë° í—ˆìœ„ë§¤ë¬¼ ì¦ê±° ìˆ˜ì§‘ì„ ìœ„í•œ í•™ìŠµìš© ë„êµ¬ì…ë‹ˆë‹¤.
